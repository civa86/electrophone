!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,n(40);var a=n(7),o=i(a),r=window||{};r.EP=o["default"],t["default"]=o["default"]},function(e,t){"use strict";t.__esModule=!0;var n={MASTER:"Master",OSCILLATOR:"Oscillator",NOISE:"Noise",MODULATOR:"Modulator",ENVELOPE:"Envelope",PAN:"Pan",FILTER:"Filter",DELAY:"Delay",PINGPONGDELAY:"PingPongDelay",TREMOLO:"Tremolo",OVERDRIVE:"Overdrive",BITCRUSHER:"Bitcrusher",MOOGFILTER:"MoogFilter"},i={MASTER:"master",ADSR:"adsr",NOISE_WHITE:"white",NOISE_PINK:"pink",NOISE_BROWN:"brown",WAVE_SINE:"sine",WAVE_SQUARE:"square",WAVE_SAWTOOTH:"sawtooth",WAVE_TRIANLGE:"triangle",WAVE_CUSTOM:"custom",FILTER_LOWPASS:"lowpass",FILTER_HIGHPASS:"highpass",FILTER_BANDPASS:"bandpass",FILTER_LOWSHELF:"lowshelf",FILTER_HIGHSHELF:"highshelf",FILTER_PEAKING:"peaking",FILTER_NOTCH:"notch",FILTER_ALLPASS:"allpass",MODULATOR_TARGET_FREQ:"frequency",MODULATOR_TARGET_DETUNE:"detune",ENVELOPE_TARGET_GAIN:"gain",ENVELOPE_TARGET_FREQ:"frequency",ENVELOPE_TARGET_DETUNE:"detune"};t.TYPES=n,t.CONST=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(1),u=n(3),l=i(u),c=n(9),f=i(c),h=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.main=null,s.mainEffect=null,s}return r(t,e),t.prototype.setMainEffect=function(e,t,n){var i=f["default"](this.audioContext);this.main=new i[e](n),this.mainEffect=this.main[t]},t.prototype.setMainProperties=function(e){var t=this;Object.keys(e).forEach(function(n){t.main[n]&&(t.main[n]=e[n])})},t.prototype.createGain=function(){return!1},t.prototype.getLineIn=function(e,t){return e===s.TYPES.MODULATOR?this.mainEffect[t.target]:this.main.input},t.prototype.getLineOut=function(){return this.main.output},t.prototype.getEnvelopeTarget=function(e){var t=null;return"gain"===e?t=this.main.output.gain:this.main&&this.mainEffect&&this.mainEffect[e]&&(t=this.main.filter[e]),t},t}(l["default"]);t["default"]=h},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(6),u=i(s),l=function(){function e(t,n,i){a(this,e),this.name=i,this.audioContext=t,this.gain=null,this.envelope=null,this.main=null,this.setupProperties(n),this.createGain(this.level)}return e.prototype.toString=function(){return this.name},e.prototype.setupProperties=function(e){var t=this,n=e||{},i=this.toString()+"Props",a=u[i],o=void 0;o=r({},u.DefaultProps,a),Object.keys(o).forEach(function(e){t.setProperty(e,n[e],o[e])})},e.prototype.getRealProperties=function(e){switch(e){case"level":return"gain";case"freq":return"frequency";case"wave":return"type";case"q":return"Q";case"link":return null;default:return e}},e.prototype.updateProperties=function(e){var t=this;Object.keys(e).forEach(function(n){var i=t.getRealProperties(n);if(t.main&&i&&t[n]!==e[n])if("gain"===i&&t.gain&&t.gain.gain){var a=e[n]>=0?e[n]%101:100;t.gain.gain.value=a/100}else void 0!==t.main[i]&&void 0!==t.main[i].value?t.main[i].value=e[n]:void 0!==t.main[i]&&(t.main[i]=e[n])})},e.prototype.setProperty=function(e,t,n){this[e]=null,n.type&&("undefined"==typeof t?"undefined":o(t))===n.type?this[e]=t:void 0!==n.defaultValue&&(this[e]=n.defaultValue)},e.prototype.createGain=function(e){var t=e>=0?e%101:100;this.gain=this.audioContext.createGain(),this.envelope=this.audioContext.createGain(),this.gain.gain.value=t/100,this.envelope.gain.value=1,this.envelope.connect(this.gain)},e.prototype.disconnect=function(){this.gain.disconnect()},e.prototype.getLineIn=function(){return this.main},e.prototype.getLineOut=function(){return this.gain},e.prototype.getEnvelopeTarget=function(e){var t=null;return this.main&&this.main[e]?t=this.main[e]:"gain"===e&&this.gain&&(t=this.envelope.gain),t},e}();t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(1),u=n(3),l=i(u),c=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.defaultLineInProperty="frequency",s}return r(t,e),t.prototype.setDetune=function(){this.main&&this.main.detune&&(this.main.detune.value=this.detune)},t.prototype.noteOn=function(){this.main.start(0)},t.prototype.noteOff=function(e){this.main.stop(e)},t.prototype.getLineIn=function(e,t){return e===s.TYPES.MODULATOR?this.main[t.target]:this.main[this.defaultLineInProperty]},t}(l["default"]);t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(19);Object.defineProperty(t,"Master",{enumerable:!0,get:function(){return i(a)["default"]}});var o=n(18);Object.defineProperty(t,"Envelope",{enumerable:!0,get:function(){return i(o)["default"]}});var r=n(20);Object.defineProperty(t,"Pan",{enumerable:!0,get:function(){return i(r)["default"]}});var s=n(23);Object.defineProperty(t,"Oscillator",{enumerable:!0,get:function(){return i(s)["default"]}});var u=n(21);Object.defineProperty(t,"Modulator",{enumerable:!0,get:function(){return i(u)["default"]}});var l=n(22);Object.defineProperty(t,"Noise",{enumerable:!0,get:function(){return i(l)["default"]}});var c=n(13);Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return i(c)["default"]}});var f=n(12);Object.defineProperty(t,"Delay",{enumerable:!0,get:function(){return i(f)["default"]}});var h=n(16);Object.defineProperty(t,"PingPongDelay",{enumerable:!0,get:function(){return i(h)["default"]}});var p=n(17);Object.defineProperty(t,"Tremolo",{enumerable:!0,get:function(){return i(p)["default"]}});var d=n(15);Object.defineProperty(t,"Overdrive",{enumerable:!0,get:function(){return i(d)["default"]}});var y=n(11);Object.defineProperty(t,"Bitcrusher",{enumerable:!0,get:function(){return i(y)["default"]}});var m=n(14);Object.defineProperty(t,"MoogFilter",{enumerable:!0,get:function(){return i(m)["default"]}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(25);Object.defineProperty(t,"DefaultProps",{enumerable:!0,get:function(){return i(a)["default"]}});var o=n(29);Object.defineProperty(t,"ModulatorProps",{enumerable:!0,get:function(){return i(o)["default"]}});var r=n(27);Object.defineProperty(t,"EnvelopeProps",{enumerable:!0,get:function(){return i(r)["default"]}});var s=n(34);Object.defineProperty(t,"PanProps",{enumerable:!0,get:function(){return i(s)["default"]}});var u=n(32);Object.defineProperty(t,"OscillatorProps",{enumerable:!0,get:function(){return i(u)["default"]}});var l=n(31);Object.defineProperty(t,"NoiseProps",{enumerable:!0,get:function(){return i(l)["default"]}});var c=n(28);Object.defineProperty(t,"FilterProps",{enumerable:!0,get:function(){return i(c)["default"]}});var f=n(26);Object.defineProperty(t,"DelayProps",{enumerable:!0,get:function(){return i(f)["default"]}});var h=n(35);Object.defineProperty(t,"PingPongDelayProps",{enumerable:!0,get:function(){return i(h)["default"]}});var p=n(36);Object.defineProperty(t,"TremoloProps",{enumerable:!0,get:function(){return i(p)["default"]}});var d=n(33);Object.defineProperty(t,"OverdriveProps",{enumerable:!0,get:function(){return i(d)["default"]}});var y=n(24);Object.defineProperty(t,"BitcrusherProps",{enumerable:!0,get:function(){return i(y)["default"]}});var m=n(30);Object.defineProperty(t,"MoogFilterProps",{enumerable:!0,get:function(){return i(m)["default"]}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(5),u=a(s),l=n(6),c=a(l),f=n(1),h=n(8),p=i(h),d=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],y=Object.keys(u),m=void 0,v=function(){function e(t,n){o(this,e);var i=n||{};m=new p["default"](t,i),this.isPlaying=!1}return e.prototype.getModules=function(){return r({},m.modulesConfig)},e.prototype.create=function(e,t,n){var i=this.getModules()[e];if(i)throw new Error("Module "+e+" already created. Use update method instead.");return m.module(t,e,n),this},e.prototype.update=function(e,t){var n=this.getModules()[e];if(!n)throw new Error("Module "+e+" not found. Use create method instead.");return m.module(n.type,e,t),this},e.prototype.master=function(e){return m.module(f.TYPES.MASTER,f.CONST.MASTER,e),this},e.prototype.adsr=function(e){return m.module(f.TYPES.ENVELOPE,f.CONST.ADSR,e),this},e.prototype.destroy=function(e){var t=this.getModules()[e];if(!t)throw new Error("Module "+e+" not found.");return m.destroyModule(e),this},e.prototype.play=function(e){return+e>=0&&(m.play(e),this.isPlaying=!0),this},e.prototype.stop=function(e){return+e>=0&&(m.stop(e),this.isPlaying=!1),this},e.prototype.link=function(e,t){if(e===f.CONST.MASTER)throw new Error("Module master can't be linked to any modules.");if(!m.modulesConfig[e])throw new Error("Source module "+e+" not found.");if(!m.modulesConfig[t])throw new Error("Target module "+t+" not found.");return m.modulesConfig[e].props.link=t,this},e.getModuleProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=c[e+"Props"]||{};return[].concat(Object.keys(t).map(function(e){return r({},t[e],{name:e})}),Object.keys(c.DefaultProps).map(function(e){return r({},c.DefaultProps[e],{name:e})}))},e.describeModules=function(){return[].concat(y).filter(function(e){return"__esModule"!==e}).reduce(function(t,n){return[].concat(t,[{type:n,properties:e.getModuleProperties(n)}])},[])},e.getFrequency=function(e,t){var n=parseInt(t,10)-4,i=d.indexOf(e)-d.indexOf("A"),a=12*n,o=i+a,r=440*Math.pow(1.059463,o);return parseFloat(r.toFixed(3))||0},e.getNotes=function(){return d},e}();v.CONST=f.CONST,v.TYPES=f.TYPES,t["default"]=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var o=n(1),r=n(10),s=i(r),u=function(){function e(t,n){a(this,e);var i=n||{};this.audioContext=t,this.modulesConfig={},this.voices={},this.spectrum=i.spectrum||!1,this.updateSpectrum=i.updateSpectrum||null,this.resetSpectrum=i.resetSpectrum||null,this.analyser=null,this.javascriptNode=null,this.audioContext&&"function"==typeof this.audioContext.createGainNode&&(this.audioContext.createGain=this.audioContext.createGainNode),this.audioContext&&"function"==typeof this.audioContext.createDelayNode&&(this.audioContext.createDelay=this.audioContext.createDelayNode),this.spectrum===!0&&this.createSpectrum(),this.module("Master",o.CONST.MASTER,{level:100}),this.module("Envelope",o.CONST.ADSR,{link:o.CONST.MASTER,target:"gain",level:100,attack:null,decay:.1,sustain:100,release:5})}return e.prototype.createSpectrum=function(){var e=.8,t=2048;this.audioContext&&(this.javascriptNode=this.audioContext.createScriptProcessor(2048,1,1),this.javascriptNode.connect(this.audioContext.destination),this.analyser=this.audioContext.createAnalyser(),this.analyser.smoothingTimeConstant=e,this.analyser.fftSize=t,this.analyser.minDecibels=-160,this.analyser.maxDecibels=0,this.analyser.connect(this.audioContext.destination))},e.prototype.module=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e.constructor!==String)throw new Error("Synth Module :: missing type");if(!t||t.constructor!==String)throw new Error("Synth Module :: missing label");this.modulesConfig[t]?this.updateModule(t,n):this.addModule(e,t,n)},e.prototype.addModule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.modulesConfig[t])throw new Error("Module "+t+" already created. Use updateModule method instead.");this.modulesConfig[t]={type:e,props:n}},e.prototype.updateModule=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.modulesConfig[e])throw new Error("Module "+e+" not found. Use addModule method instead.");Object.keys(n).forEach(function(i){void 0!==t.modulesConfig[e].props[i]&&(t.modulesConfig[e].props[i]=n[i])}),Object.keys(this.voices).forEach(function(i){t.voices[i].updateModule(e,n)})},e.prototype.destroyModule=function(e){var t=this;if(!this.modulesConfig[e])throw new Error("Module "+e+" not found.");delete this.modulesConfig[e],Object.keys(this.voices).forEach(function(n){t.voices[n].removeModule(e)})},e.prototype.play=function(e){var t=this,n=void 0,i=this.analyser&&this.analyser.frequencyBinCount?this.analyser.frequencyBinCount:1024;this.voices[e]||(this.voices[e]=new s["default"](e,this.audioContext,this.modulesConfig,this.analyser),this.voices[e].noteOn()),this.spectrum===!0&&this.javascriptNode&&(n=new Uint8Array(i),this.javascriptNode.onaudioprocess=function(){t.analyser.getByteFrequencyData(n),t.updateSpectrum&&"function"==typeof t.updateSpectrum&&t.updateSpectrum(n)})},e.prototype.stop=function(e){this.voices[e]&&(this.voices[e].noteOff(),this.voices[e]=void 0,delete this.voices[e]),0===Object.keys(this.voices).length&&this.spectrum===!0&&this.javascriptNode&&(this.javascriptNode.onaudioprocess=null,this.resetSpectrum&&"function"==typeof this.resetSpectrum&&this.resetSpectrum())},e}();t["default"]=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=n(41),o=i(a),r=function(e){return new o["default"](e)};t["default"]=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(5),s=a(r),u=n(4),l=i(u),c=n(1),f=function(){function e(t,n,i,a){o(this,e),this.note=t,this.modulesConfig=i,this.modules={},this.soundSources=[],this.master=null,this.analyser=a||null,n&&(this.setupModules(n),this.linkModules())}return e.prototype.setupModules=function(e){var t=this,n=void 0,i=void 0;Object.keys(this.modulesConfig).forEach(function(a){n=t.modulesConfig[a],n.type&&n.props&&(i=new s[n.type](e,n.props,n.type),t.modules[a]={type:n.type,instance:i},i.instance instanceof l["default"]?t.soundSources.push(i):n.type===c.TYPES.MASTER&&(t.master=i))})},e.prototype.updateModule=function(e,t){this.modules[e]&&this.modules[e].instance&&this.modules[e].instance.updateProperties(t)},e.prototype.removeModule=function(e){this.modules[e]&&this.modules[e].instance&&this.modules[e].instance.disconnect()},e.prototype.linkModules=function(){var e=this;Object.keys(this.modules).forEach(function(t){var n=e.modules[t].instance,i=e.modules[t].type,a=void 0,o=void 0,r=void 0;n.link&&(a=e.modules[n.link],a&&a.instance&&(o=n.getLineOut(),r=a.instance.getLineIn(i,n),o&&r&&o.connect(r)))}),this.master.lineOut(this.analyser)},e.prototype.noteOn=function(){var e=this,t=void 0,n=void 0;Object.keys(this.modules).forEach(function(i){t=e.modules[i].instance,"function"==typeof t.setEnvelope&&(n=e.modules[t.link]?e.modules[t.link].instance:null,t.setEnvelope(n)),"function"==typeof t.setNote&&t.setNote(+e.note)}),Object.keys(this.modules).forEach(function(n){t=e.modules[n].instance,t&&"function"==typeof t.noteOn&&t.noteOn()})},e.prototype.noteOff=function(){var e=this,t=0,n=this.modules.adsr?this.modules.adsr.instance:null,i=void 0,a=void 0;n&&(t=n.getReleaseTime()),Object.keys(this.modules).forEach(function(t){i=e.modules[t].instance,i&&"function"==typeof i.resetEnvelope&&(a=e.modules[i.link]?e.modules[i.link].instance:null,i.resetEnvelope(a))}),Object.keys(this.modules).forEach(function(n){i=e.modules[n].instance,i&&"function"==typeof i.noteOff&&i.noteOff(t)})},e}();t["default"]=f},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("Bitcrusher","output"),s.setMainProperties({bits:s.bits,normfreq:s.normfreq,bufferSize:s.bufferSize}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("Delay","filter"),s.setMainProperties({dryLevel:s.dry,wetLevel:s.wet,feedback:s.feedback,cutoff:s.cutoff,delayTime:s.delayTime,bypass:s.bypass}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("Filter","filter"),s.setMainProperties({frequency:s.freq,Q:s.q,gain:s.filterGain,filterType:s.filterType,bypass:s.bypass}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("MoogFilter","output"),s.setMainProperties({cutoff:s.cutoff,resonance:s.resonance,bufferSize:s.bufferSize}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("Overdrive","output"),s.setMainProperties({outputGain:s.outputGain,drive:s.drive,curveAmount:s.curveAmount,algorithmIndex:s.algorithmIndex,bypass:s.bypass}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("PingPongDelay","delayLeft"),s.setMainProperties({dryLevel:s.dry,wetLevel:s.wet,feedback:s.feedback,delayTimeLeft:s.delayTimeLeft,delayTimeRight:s.delayTimeRight,bypass:s.bypass}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.setMainEffect("Tremolo","output"),s.setMainProperties({intensity:s.intensity,rate:s.rate,stereoPhase:s.stereoPhase,bypass:s.bypass}),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(3),u=i(s),l=function(e){function t(n,i,r){return a(this,t),o(this,e.call(this,n,i,r))}return r(t,e),t.prototype.createGain=function(){return!1},t.prototype.getReleaseTime=function(){var e=this.audioContext.currentTime,t=void 0;return t=this.release?e+this.release/10:e+.2},t.prototype.setEnvelope=function(e){var t=this.audioContext.currentTime,n=this.level%101,i=void 0,a=void 0,o=this.attack/20,r=void 0;"gain"===this.target?(i=n/100,a=this.sustain/100):(i=72*n,a=i*this.sustain/100),o||(o=.05),e&&"function"==typeof e.getEnvelopeTarget&&(r=e.getEnvelopeTarget(this.target),r&&r.setValueAtTime&&r.linearRampToValueAtTime&&r.setTargetAtTime&&(r.setValueAtTime(0,t),r.linearRampToValueAtTime(i,t+o),r.setTargetAtTime(a,t+o,this.decay/100)))},t.prototype.resetEnvelope=function(e){var t=this.audioContext.currentTime,n=void 0;e&&"function"==typeof e.getEnvelopeTarget&&(n=e.getEnvelopeTarget(this.target),n&&n.cancelScheduledValues&&n.setValueAtTime&&n.setTargetAtTime&&(n.cancelScheduledValues(t),"gain"===this.target&&n.setValueAtTime(n.value,t),n.setTargetAtTime(0,t,this.release/100)))},t.prototype.getLineOut=function(){return!1},t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(3),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.main=s.audioContext.createGain(),s.link=null,s}return r(t,e),t.prototype.getLineIn=function(){return this.main},t.prototype.lineOut=function(e){this.main.connect(this.envelope),e?this.gain.connect(e):this.gain.connect(this.audioContext.destination)},t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(3),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.main=s.audioContext.createStereoPanner(),s.main.pan.value=s.pan,s.main.connect(s.envelope),s}return r(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(4),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.main=s.audioContext.createOscillator(),s.main.type=s.wave,s.main.connect(s.envelope),s}return r(t,e),t.prototype.setNote=function(){var e=this.freq%11;this.main.frequency.value=e},t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(1),u=n(4),l=i(u),c=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.defaultLineInProperty="detune",s.main=s.audioContext.createBufferSource(),s.main.connect(s.envelope),s.setDetune(),s.setColor(),s}return r(t,e),t.prototype.setColor=function(){switch(this.color){case s.CONST.NOISE_WHITE:this.main.buffer=this.white();break;case s.CONST.NOISE_PINK:this.main.buffer=this.pink();break;case s.CONST.NOISE_BROWN:this.main.buffer=this.brown();break;default:throw new Error("Invalid Noise color: "+this.color)}},t.prototype.white=function(){for(var e=this.getNoiseBuffer(),t=this.getBufferSize(),n=e.getChannelData(0),i=0;t>i;i++)n[i]=2*Math.random()-1;return e},t.prototype.pink=function(){var e=void 0,t=void 0,n=void 0,i=void 0,a=void 0,o=void 0,r=void 0,s=this.getNoiseBuffer(),u=this.getBufferSize(),l=s.getChannelData(0),c=void 0;e=t=n=i=a=o=r=0;for(var f=0;u>f;f++)c=2*Math.random()-1,e=.99886*e+.0555179*c,t=.99332*t+.0750759*c,n=.969*n+.153852*c,i=.8665*i+.3104856*c,a=.55*a+.5329522*c,o=-.7616*o-.016898*c,l[f]=e+t+n+i+a+o+r+.5362*c,l[f]*=.11,r=.115926*c;return s},t.prototype.brown=function(){for(var e=this.getNoiseBuffer(),t=this.getBufferSize(),n=e.getChannelData(0),i=0,a=void 0,o=0;t>o;o++)a=a=2*Math.random()-1,n[o]=(i+.02*a)/1.02,i=n[o],n[o]*=3.5;return e},t.prototype.getBufferSize=function(){return 2*this.audioContext.sampleRate},t.prototype.getNoiseBuffer=function(){var e=this.getBufferSize(),t=this.audioContext.createBuffer(1,e,this.audioContext.sampleRate);return t},t.prototype.setNote=function(){this.main.loop=!0},t}(l["default"]);t["default"]=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(4),u=i(s),l=function(e){function t(n,i,r){a(this,t);var s=o(this,e.call(this,n,i,r));return s.main=s.audioContext.createOscillator(),s.main.type=s.wave,s.main.connect(s.envelope),s.setDetune(),s}return r(t,e),t.prototype.setNote=function(e){this.main.frequency.value=e},t}(u["default"]);t["default"]=l},function(e,t){"use strict";t.__esModule=!0;var n={bits:{type:"number",bounds:[1,16],defaultValue:4},normfreq:{type:"number",bounds:[0,1],step:.1,defaultValue:.1},bufferSize:{type:"number",bounds:[256,16384],defaultValue:4096},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=n},function(e,t){"use strict";t.__esModule=!0;var n={link:{type:"string",defaultValue:""},level:{type:"number",bounds:[0,100],defaultValue:100}};t["default"]=n},function(e,t){"use strict";t.__esModule=!0;var n={dry:{type:"number",bounds:[0,1],step:.1,defaultValue:1},wet:{type:"number",bounds:[0,1],step:.1,defaultValue:.5},feedback:{type:"number",bounds:[0,.9],step:.1,defaultValue:.4},cutoff:{type:"number",bounds:[20,2e4],defaultValue:440},delayTime:{type:"number",bounds:[20,1e3],defaultValue:100},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=n},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),a={target:{type:"string",bounds:[i.CONST.ENVELOPE_TARGET_GAIN,i.CONST.ENVELOPE_TARGET_FREQ,i.CONST.ENVELOPE_TARGET_DETUNE],defaultValue:i.CONST.ENVELOPE_TARGET_GAIN},attack:{type:"number",bounds:[0,100],defaultValue:0},decay:{type:"number",bounds:[1,100],defaultValue:1},sustain:{type:"number",bounds:[0,100],defaultValue:100},release:{type:"number",bounds:[0,100],defaultValue:5}};t["default"]=a},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),a={freq:{type:"number",bounds:[20,2e4],defaultValue:440},q:{type:"number",bounds:[0,100],defaultValue:10},filterGain:{type:"number",bounds:[-40,40],defaultValue:0},filterType:{type:"string",bounds:[i.CONST.FILTER_ALLPASS,i.CONST.FILTER_BANDPASS,i.CONST.FILTER_HIGHPASS,i.CONST.FILTER_HIGHSHELF,i.CONST.FILTER_LOWPASS,i.CONST.FILTER_LOWSHELF,i.CONST.FILTER_NOTCH,i.CONST.FILTER_PEAKING],defaultValue:i.CONST.FILTER_LOWPASS},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=a},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),a={freq:{type:"number",bounds:[1,100],defaultValue:5},target:{type:"string",bounds:[i.CONST.MODULATOR_TARGET_FREQ,i.CONST.MODULATOR_TARGET_DETUNE],defaultValue:i.CONST.MODULATOR_TARGET_FREQ},wave:{type:"string",bounds:[i.CONST.WAVE_SINE,i.CONST.WAVE_SQUARE,i.CONST.WAVE_SAWTOOTH,i.CONST.WAVE_TRIANLGE,i.CONST.WAVE_CUSTOM],defaultValue:i.CONST.WAVE_SINE}};t["default"]=a},function(e,t){"use strict";t.__esModule=!0;var n={cutoff:{type:"number",bounds:[0,1],step:.1,defaultValue:.1},resonance:{type:"number",bounds:[0,4],step:.1,defaultValue:3.5},bufferSize:{type:"number",bounds:[256,16384],defaultValue:4096},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=n},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),a={color:{type:"string",bounds:[i.CONST.NOISE_BROWN,i.CONST.NOISE_PINK,i.CONST.NOISE_WHITE],defaultValue:i.CONST.NOISE_WHITE},detune:{type:"number",bounds:[-1200,1200],defaultValue:0}};t["default"]=a},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1),a={detune:{type:"number",bounds:[-1200,1200],defaultValue:0},wave:{type:"string",bounds:[i.CONST.WAVE_SINE,i.CONST.WAVE_SQUARE,i.CONST.WAVE_SAWTOOTH,i.CONST.WAVE_TRIANLGE,i.CONST.WAVE_CUSTOM],defaultValue:i.CONST.WAVE_SINE}};t["default"]=a},function(e,t){"use strict";t.__esModule=!0;var n={outputGain:{type:"number",bounds:[0,1],step:.1,defaultValue:1},drive:{type:"number",bounds:[0,1],step:.1,defaultValue:1},curveAmount:{type:"number",bounds:[0,1],step:.1,defaultValue:.7},algorithmIndex:{type:"number",bounds:[0,5],defaultValue:0},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=n},function(e,t){"use strict";t.__esModule=!0;var n={pan:{type:"number",bounds:[-1,1],step:.1,defaultValue:0}};t["default"]=n},function(e,t){"use strict";t.__esModule=!0;var n={wet:{type:"number",bounds:[0,1],step:.1,defaultValue:.5},feedback:{type:"number",bounds:[0,1],step:.1,defaultValue:.3},delayTimeLeft:{type:"number",bounds:[1,1e4],defaultValue:200},delayTimeRight:{type:"number",bounds:[1,1e4],defaultValue:400},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=n},function(e,t){"use strict";t.__esModule=!0;var n={intensity:{type:"number",bounds:[0,1],step:.1,defaultValue:.3},rate:{type:"number",bounds:[0,11],step:.1,defaultValue:5},stereoPhase:{type:"number",bounds:[0,180],defaultValue:0},bypass:{type:"number",bounds:[0,1],defaultValue:0}};t["default"]=n},function(e,t){"use strict";var n=4096,i=new Float32Array(n),a=new Float32Array(n);!function(){for(var e=0;n>e;e++)i[e]=Math.cos(e/n*Math.PI*.5),a[e]=Math.sin(e/n*Math.PI*.5)}(),e.exports={L:i,R:a}},function(e,t,n){(function(t){"use strict";function i(e){this.audioContext=e,this.inlet=e.createChannelSplitter(2),this._pan=e.createGain(),this.pan=this._pan.gain,this._wsL=e.createWaveShaper(),this._wsR=e.createWaveShaper(),this._L=e.createGain(),this._R=e.createGain(),this.outlet=e.createChannelMerger(2),this.inlet.channelCount=2,this.inlet.channelCountMode="explicit",this._pan.gain.value=0,this._wsL.curve=a.L,this._wsR.curve=a.R,this._L.gain.value=0,this._R.gain.value=0,this.inlet.connect(this._L,0),this.inlet.connect(this._R,1),this._L.connect(this.outlet,0,0),this._R.connect(this.outlet,0,1),this._pan.connect(this._wsL),this._pan.connect(this._wsR),this._wsL.connect(this._L.gain),this._wsR.connect(this._R.gain),this._isConnected=!1,this._dc1buffer=null,this._dc1=null}var a=n(37);i.prototype.connect=function(e){var n=this.audioContext;this._isConnected||(this._isConnected=!0,this._dc1buffer=n.createBuffer(1,2,n.sampleRate),this._dc1buffer.getChannelData(0).set([1,1]),this._dc1=n.createBufferSource(),this._dc1.buffer=this._dc1buffer,this._dc1.loop=!0,this._dc1.start(n.currentTime),this._dc1.connect(this._pan)),t.AudioNode.prototype.connect.call(this.outlet,e)},i.prototype.disconnect=function(){var e=this.audioContext;this._isConnected&&(this._isConnected=!1,this._dc1.stop(e.currentTime),this._dc1.disconnect(),this._dc1=null,this._dc1buffer=null),t.AudioNode.prototype.disconnect.call(this.outlet)},e.exports=i}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){var t=new a(e);return Object.defineProperties(t.inlet,{pan:{value:t.pan,enumerable:!0},connect:{value:function(e){return t.connect(e)}},disconnect:{value:function(){return t.disconnect()}}}),t.inlet}var a=n(38);e.exports=i},function(e,t,n){(function(e){"use strict";var t=e.AudioContext||e.webkitAudioContext,i=n(39);t&&!t.prototype.createStereoPanner&&(t.prototype.createStereoPanner=function(){return new i(this)})}).call(t,function(){return this}())},function(e,t,n){!function(t){function n(){return i}function i(e){if(!(this instanceof i))return new i(e);if(t.AudioContext||(t.AudioContext=t.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=t.AudioContext&&new t.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");a(e),c=e,f=this}function a(e){function t(){var e=Array.prototype.shift.apply(arguments);return e=p.isPrototypeOf?p.isPrototypeOf(e)?e.input:e:e.input||e,arguments=Array.prototype.slice.call(arguments),arguments.unshift(e),a.apply(this,arguments),e}if(e.__connectified__!==!0){var n=e.createGain(),i=Object.getPrototypeOf(Object.getPrototypeOf(n)),a=i.connect;i.connect=t,e.__connectified__=!0}}function o(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function r(e,t){var n,i,a=0,o=0,r=0,s=0;return n=e.toExponential().match(/^.\.?(.*)e(.+)$/),a=parseInt(n[2],10)-(n[1]+"").length,n=t.toExponential().match(/^.\.?(.*)e(.+)$/),o=parseInt(n[2],10)-(n[1]+"").length,o>a&&(a=o),i=e%t,-100>a||a>20?(r=Math.round(Math.log(i)/Math.log(10)),s=Math.pow(10,r),(i/s).toFixed(r-a)*s):parseFloat(i.toFixed(-a))}function s(e){return 0===e?1:Math.abs(e)/e}function u(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function l(e,t){return void 0===e?t:e}var c,f,h=function(e,t){e.value=t},p=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){for(var t=e.length-1;t--;){if(!e[t].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[t]);e[t+1].input?e[t].connect(e[t+1].input):e[t].connect(e[t+1])}}},getDefaults:{value:function(){var e={};for(var t in this.defaults)e[t]=this.defaults[t].value;return e}},automate:{value:function(e,t,n,i){var a,o=i?~~(i/1e3):c.currentTime,r=n?~~(n/1e3):0,s=this.defaults[e],u=this[e];u?s.automatable?(n?(a="linearRampToValueAtTime",u.cancelScheduledValues(o),u.setValueAtTime(u.value,o)):a="setValueAtTime",u[a](t,r+o)):u=t:console.error("Invalid Property for "+this.name)}}}),d="float",y="boolean",m="string",v="int";"undefined"!=typeof e&&e.exports?e.exports=i:t.define("Tuna",n),i.prototype.Bitcrusher=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=c.createGain(),this.activateNode=c.createGain(),this.processor=c.createScriptProcessor(this.bufferSize,1,1),this.output=c.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,n,i,a,o,r=0,s=0;this.processor.onaudioprocess=function(e){for(t=e.inputBuffer.getChannelData(0),n=e.outputBuffer.getChannelData(0),i=Math.pow(.5,this.bits),o=t.length,a=0;o>a;a++)r+=this.normfreq,r>=1&&(r-=1,s=i*Math.floor(t[a]/i+.5)),n[a]=s},this.bits=e.bits||this.defaults.bits.value,this.normfreq=l(e.normfreq,this.defaults.normfreq.value),this.bypass=e.bypass||!1},i.prototype.Bitcrusher.prototype=Object.create(p,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:v},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:v},bypass:{value:!0,automatable:!1,type:y},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:d}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),i.prototype.Cabinet=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.convolver=this.newConvolver(e.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=l(e.makeupGain,this.defaults.makeupGain),this.bypass=e.bypass||!1},i.prototype.Cabinet.prototype=Object.create(p,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:d},bypass:{value:!1,automatable:!1,type:y}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=e}},newConvolver:{value:function(e){return new f.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),i.prototype.Chorus=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.attenuator=this.activateNode=c.createGain(),this.splitter=c.createChannelSplitter(2),this.delayL=c.createDelay(),this.delayR=c.createDelay(),this.feedbackGainNodeLR=c.createGain(),this.feedbackGainNodeRL=c.createGain(),this.merger=c.createChannelMerger(2),this.output=c.createGain(),this.lfoL=new f.LFO({target:this.delayL.delayTime,callback:h}),this.lfoR=new f.LFO({target:this.delayR.delayTime,callback:h}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=l(e.feedback,this.defaults.feedback.value),this.rate=l(e.rate,this.defaults.rate.value),this.delay=l(e.delay,this.defaults.delay.value),this.depth=l(e.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},i.prototype.Chorus.prototype=Object.create(p,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:d},delay:{value:.0045,min:0,max:1,automatable:!1,type:d},depth:{value:.7,min:0,max:1,automatable:!1,type:d},rate:{value:1.5,min:0,max:8,automatable:!1,type:d},bypass:{value:!0,automatable:!1,type:y}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=2e-4*(2*Math.pow(10,e)),this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),i.prototype.Compressor=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.compNode=this.activateNode=c.createDynamicsCompressor(),this.makeupNode=c.createGain(),this.output=c.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=l(e.automakeup,this.defaults.automakeup.value),this.makeupGain=e.makeupGain||this.defaults.makeupGain.value,this.threshold=l(e.threshold,this.defaults.threshold.value),this.release=e.release||this.defaults.release.value,this.attack=l(e.attack,this.defaults.attack.value),this.ratio=e.ratio||this.defaults.ratio.value,this.knee=l(e.knee,this.defaults.knee.value),this.bypass=e.bypass||!1},i.prototype.Compressor.prototype=Object.create(p,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:d},release:{value:250,min:10,max:2e3,automatable:!0,type:d},makeupGain:{value:1,min:1,max:100,automatable:!0,type:d},attack:{value:1,min:0,max:1e3,automatable:!0,type:d},ratio:{value:4,min:1,max:50,automatable:!0,type:d},knee:{value:5,min:0,max:40,automatable:!0,type:d},automakeup:{value:!1,automatable:!1,type:y},bypass:{value:!0,automatable:!1,type:y}}},computeMakeup:{value:function(){var e=4,t=this.compNode;return-(t.threshold.value-t.threshold.value/t.ratio.value)/e}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release=e/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=o(e)}}}),i.prototype.Convolver=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.convolver=c.createConvolver(),this.dry=c.createGain(),this.filterLow=c.createBiquadFilter(),this.filterHigh=c.createBiquadFilter(),this.wet=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=l(e.dryLevel,this.defaults.dryLevel.value),this.wetLevel=l(e.wetLevel,this.defaults.wetLevel.value),this.highCut=e.highCut||this.defaults.highCut.value,this.buffer=e.impulse||"../impulses/ir_rev_short.wav",this.lowCut=e.lowCut||this.defaults.lowCut.value,this.level=l(e.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=e.bypass||!1},i.prototype.Convolver.prototype=Object.create(p,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:d},lowCut:{value:20,min:20,max:22050,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d},wetLevel:{value:1,min:0,max:1,automatable:!0,type:d},level:{value:1,min:0,max:1,automatable:!0,type:d}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.value=e}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.value=e}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.value=e}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(e){var t=this.convolver,n=new XMLHttpRequest;return e?(n.open("GET",e,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status<300&&n.status>199||302===n.status)&&c.decodeAudioData(n.response,function(e){t.buffer=e},function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)})},void n.send(null)):void console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),i.prototype.Delay=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.dry=c.createGain(),this.wet=c.createGain(),this.filter=c.createBiquadFilter(),this.delay=c.createDelay(),this.feedbackNode=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=e.delayTime||this.defaults.delayTime.value,this.feedback=l(e.feedback,this.defaults.feedback.value),this.wetLevel=l(e.wetLevel,this.defaults.wetLevel.value),this.dryLevel=l(e.dryLevel,this.defaults.dryLevel.value),this.cutoff=e.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=e.bypass||!1},i.prototype.Delay.prototype=Object.create(p,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:d},feedback:{value:.45,min:0,max:.9,automatable:!0,type:d},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:d},dryLevel:{value:1,min:0,max:1,automatable:!0,type:d}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.value=e}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),i.prototype.Filter=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.filter=c.createBiquadFilter(),this.output=c.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=e.frequency||this.defaults.frequency.value,this.Q=e.resonance||this.defaults.Q.value,this.filterType=l(e.filterType,this.defaults.filterType.value),this.gain=l(e.gain,this.defaults.gain.value),this.bypass=e.bypass||!1},i.prototype.Filter.prototype=Object.create(p,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:d},Q:{value:1,min:.001,max:100,automatable:!0,type:d},gain:{value:0,min:-40,max:40,automatable:!0,type:d},bypass:{value:!0,automatable:!1,type:y},filterType:{value:"lowpass",automatable:!1,type:m}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.value=e}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),i.prototype.MoogFilter=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=c.createGain(),this.activateNode=c.createGain(),this.processor=c.createScriptProcessor(this.bufferSize,1,1),this.output=c.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,n,i,a,o,r,s,u;t=n=i=a=o=r=s=u=0;var f,h,p,d,y,m;this.processor.onaudioprocess=function(e){for(f=e.inputBuffer.getChannelData(0),h=e.outputBuffer.getChannelData(0),p=1.16*this.cutoff,inputFactor=.35013*(p*p)*(p*p),d=this.resonance*(1-.15*p*p),m=f.length,y=0;m>y;y++)f[y]-=u*d,f[y]*=inputFactor,o=f[y]+.3*t+(1-p)*o,t=f[y],r=o+.3*n+(1-p)*r,n=o,s=r+.3*i+(1-p)*s,i=r,u=s+.3*a+(1-p)*u,a=s,h[y]=u},this.cutoff=l(e.cutoff,this.defaults.cutoff.value),this.resonance=l(e.resonance,this.defaults.resonance.value),this.bypass=e.bypass||!1},i.prototype.MoogFilter.prototype=Object.create(p,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:v},bypass:{value:!1,automatable:!1,type:y},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:d},resonance:{value:3.5,min:0,max:4,automatable:!1,type:d}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),i.prototype.Overdrive=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.inputDrive=c.createGain(),this.waveshaper=c.createWaveShaper(),this.outputDrive=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=l(e.drive,this.defaults.drive.value),this.outputGain=l(e.outputGain,this.defaults.outputGain.value),this.curveAmount=l(e.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=l(e.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=e.bypass||!1},i.prototype.Overdrive.prototype=Object.create(p,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:d,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:d},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:v}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this._drive=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=o(e)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,t,n){e=Math.min(e,.9999);var i,a,o=2*e/(1-e);for(i=0;t>i;i++)a=2*i/t-1,n[i]=(1+o)*a/(1+o*Math.abs(a))},function(e,t,n){var i,a,o;for(i=0;t>i;i++)a=2*i/t-1,o=(.5*Math.pow(a+1.4,2)-1)*o>=0?5.8:1.2,n[i]=u(o)},function(e,t,n){var i,a,o,r=1-e;for(i=0;t>i;i++)a=2*i/t-1,o=0>a?-Math.pow(Math.abs(a),r+.04):Math.pow(a,r),n[i]=u(2*o)},function(e,t,n){var i,a,o,r,u=1-e>.99?.99:1-e;for(i=0;t>i;i++)a=2*i/t-1,r=Math.abs(a),u>r?o=r:r>u?o=u+(r-u)/(1+Math.pow((r-u)/(1-u),2)):r>1&&(o=r),n[i]=s(a)*o*(1/((u+1)/2))},function(e,t,n){var i,a;for(i=0;t>i;i++)a=2*i/t-1,-.08905>a?n[i]=-3/4*(1-Math.pow(1-(Math.abs(a)-.032857),12)+1/3*(Math.abs(a)-.032847))+.01:a>=-.08905&&.320018>a?n[i]=-6.153*(a*a)+3.9375*a:n[i]=.630035},function(e,t,n){var i,a,o=2+Math.round(14*e),r=Math.round(Math.pow(2,o-1));for(i=0;t>i;i++)a=2*i/t-1,n[i]=Math.round(a*r)/r}]}}),i.prototype.Phaser=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.splitter=this.activateNode=c.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=c.createGain(),this.feedbackGainNodeR=c.createGain(),this.merger=c.createChannelMerger(2),this.filteredSignal=c.createGain(),this.output=c.createGain(),this.lfoL=new f.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new f.LFO({target:this.filtersR,callback:this.callback});for(var t=this.stage;t--;)this.filtersL[t]=c.createBiquadFilter(),this.filtersR[t]=c.createBiquadFilter(),this.filtersL[t].type="allpass",this.filtersR[t].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=l(e.rate,this.defaults.rate.value),this.baseModulationFrequency=e.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=l(e.depth,this.defaults.depth.value),this.feedback=l(e.feedback,this.defaults.feedback.value),this.stereoPhase=l(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},i.prototype.Phaser.prototype=Object.create(p,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:d},depth:{value:.6,min:0,max:1,automatable:!1,type:d},feedback:{value:.7,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:d},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:d}}},callback:{value:function(e,t){for(var n=0;4>n;n++)e[n].frequency.value=t}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=r(t,2*Math.PI),this.lfoR._phase=t}}}),i.prototype.PingPongDelay=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.wetLevel=c.createGain(),this.stereoToMonoMix=c.createGain(),this.feedbackLevel=c.createGain(),this.output=c.createGain(),this.delayLeft=c.createDelay(),this.delayRight=c.createDelay(),this.activateNode=c.createGain(),this.splitter=c.createChannelSplitter(2),this.merger=c.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wetLevel),this.wetLevel.connect(this.delayLeft),this.feedbackLevel.connect(this.delayLeft),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==e.delayTimeLeft?e.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==e.delayTimeRight?e.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==e.feedback?e.feedback:this.defaults.feedback.value,this.wetLevel.gain.value=void 0!==e.wetLevel?e.wetLevel:this.defaults.wetLevel.value,this.bypass=e.bypass||!1},i.prototype.PingPongDelay.prototype=Object.create(p,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:v},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:v},feedback:{value:.3,min:0,max:1,automatable:!1,type:d},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:d}}}}),i.prototype.Tremolo=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.splitter=this.activateNode=c.createChannelSplitter(2),this.amplitudeL=c.createGain(),this.amplitudeR=c.createGain(),this.merger=c.createChannelMerger(2),this.output=c.createGain(),this.lfoL=new f.LFO({target:this.amplitudeL.gain,callback:h}),this.lfoR=new f.LFO({target:this.amplitudeR.gain,callback:h}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=e.rate||this.defaults.rate.value,this.intensity=l(e.intensity,this.defaults.intensity.value),this.stereoPhase=l(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1;
},i.prototype.Tremolo.prototype=Object.create(p,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:d},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:d},rate:{value:5,min:.1,max:11,automatable:!1,type:d}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._rate},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=r(t,2*Math.PI),this.lfoR.phase=t}}}),i.prototype.WahWah=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.envelopeFollower=new f.EnvelopeFollower({target:this,callback:function(e,t){e.sweep=t}}),this.filterBp=c.createBiquadFilter(),this.filterPeaking=c.createBiquadFilter(),this.output=c.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=l(e.enableAutoMode,this.defaults.automode.value),this.resonance=e.resonance||this.defaults.resonance.value,this.sensitivity=l(e.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=l(e.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=e.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=l(e.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=e.bypass||!1},i.prototype.WahWah.prototype=Object.create(p,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:y},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:d},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:d},sweep:{value:.2,min:0,max:1,automatable:!1,type:d},resonance:{value:10,min:1,max:100,automatable:!1,type:d},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:d}}},activateCallback:{value:function(e){this.automode=e}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep,this.filterPeaking.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep.value},set:function(e){this._sweep=Math.pow(e>1?1:0>e?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=50*Math.pow(10,2*e),this._excursionFrequency=Math.min(c.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(e){this._excursionOctaves=e,this._excursionFrequency=Math.min(c.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),i.prototype.EnvelopeFollower=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.jsNode=this.output=c.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=l(e.attackTime,this.defaults.attackTime.value),this.releaseTime=l(e.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=e.target||{},this.callback=e.callback||function(){}},i.prototype.EnvelopeFollower.prototype=Object.create(p,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:d},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:d}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"==typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){this.activated=e,e?(this.jsNode.connect(c.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null)}},returnCompute:{value:function(e){return function(t){e.compute(t)}}},compute:{value:function(e){var t,n,i,a,o=e.inputBuffer.getChannelData(0).length,r=e.inputBuffer.numberOfChannels;if(n=i=a=0,r>1)for(a=0;o>a;++a)for(;r>n;++n)t=e.inputBuffer.getChannelData(n)[a],i+=t*t/r;else for(a=0;o>a;++a)t=e.inputBuffer.getChannelData(0)[a],i+=t*t;i=Math.sqrt(i),this._envelope<i?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*i):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*i),this._callback(this._target,this._envelope)}}}),i.prototype.LFO=function(e){this.output=c.createScriptProcessor(256,1,1),this.activateNode=c.destination,this.frequency=l(e.frequency,this.defaults.frequency.value),this.offset=l(e.offset,this.defaults.offset.value),this.oscillation=l(e.oscillation,this.defaults.oscillation.value),this.phase=l(e.phase,this.defaults.phase.value),this.target=e.target||{},this.output.onaudioprocess=this.callback(e.callback||function(){}),this.bypass=e.bypass||!1},i.prototype.LFO.prototype=Object.create(p,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:d},offset:{value:.85,min:0,max:22049,automatable:!1,type:d},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:d},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:d}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){e?this.output.connect(c.destination):this.output.disconnect(c.destination)}},callback:{value:function(e){var t=this;return function(){t._phase+=t._phaseInc,t._phase>2*Math.PI&&(t._phase=0),e(t._target,t._offset+t._oscillation*Math.sin(t._phase))}}}}),i.toString=i.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}(this)}]);
//# sourceMappingURL=electrophone.min.js.map