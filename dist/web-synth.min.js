!function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var n=i(6),o=a(n),s=window||{};s.WebSynth=o["default"]},/*!***********************************!*\
  !*** ./src/lib/core/Constants.js ***!
  \***********************************/
function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={MASTER:"Master",OSCILLATOR:"Oscillator",MODULATOR:"Modulator",FILTER:"Filter",NOISE:"Noise",REVERB:"Reverb",CHORUS:"Chorus",DELAY:"Delay",ENVELOPE:"Envelope"};t.TYPES=i;var a={MASTER:"master",ADSR:"adsr",NOISE_WHITE:"white",NOISE_PINK:"pink",NOISE_BROWN:"brown",WAVE_SINE:"sine",WAVE_SQUARE:"square",WAVE_SAWTOOTH:"sawtooth",WAVE_TRIANLGE:"triangle",WAVE_CUSTOM:"custom",FILTER_LOWPASS:"lowpass",FILTER_HIGHPASS:"highpass",FILTER_BANDPASS:"bandpass",FILTER_LOWSHELF:"lowshelf",FILTER_HIGHSHELF:"highshelf",FILTER_PEAKING:"peaking",FILTER_NOTCH:"notch",FILTER_ALLPASS:"allpass"};t.CONST=a},/*!*********************************!*\
  !*** ./src/lib/AudioContext.js ***!
  \*********************************/
function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=window.AudioContext||window.webkitAudioContext,a=new i,n={createGainNode:"createGain",createDelayNode:"createDelay"};for(var o in n)"function"==typeof a[o]&&(a[n[o]]=a[o]);t["default"]=a,e.exports=t["default"]},/*!********************************!*\
  !*** ./src/lib/core/Module.js ***!
  \********************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=i(2),r=a(s),u=function(){function e(t){n(this,e),this.gain=null,this.main=null,this.link=t.link||null,this.level=+t.level,this.createGain(this.level)}return o(e,[{key:"createGain",value:function(e){var t=e>=0?e%101:100;this.gain=r["default"].createGain(),this.gain.gain.value=t/100}},{key:"disconnect",value:function(){this.gain.disconnect()}},{key:"getLineIn",value:function(){return this.main}},{key:"getLineOut",value:function(){return this.gain}},{key:"getEnvelopeTarget",value:function(e){var t=null;return this.main&&this.main[e]?t=this.main[e]:"gain"===e&&this.gain&&(t=this.gain.gain),t}}]),e}();t["default"]=u,e.exports=t["default"]},/*!*************************************!*\
  !*** ./src/lib/core/SoundSource.js ***!
  \*************************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(3),l=a(u),c=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return o(t,e),s(t,[{key:"noteOn",value:function(){this.main.start(0)}},{key:"noteOff",value:function(e){this.main.stop(e)}}]),t}(l["default"]);t["default"]=c,e.exports=t["default"]},/*!**********************************!*\
  !*** ./src/lib/modules/index.js ***!
  \**********************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e["default"]:e}Object.defineProperty(t,"__esModule",{value:!0});var n=i(13);t.Master=a(n);var o=i(16);t.Oscillator=a(o);var s=i(14);t.Modulator=a(s);var r=i(15);t.Noise=a(r);var u=i(11);t.Envelope=a(u);var l=i(12);t.Filter=a(l)},/*!*************************!*\
  !*** ./src/WebSynth.js ***!
  \*************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),r=n(s),u=i(1),l=i(7),c=a(l),h=function f(){var e=this;o(this,f);var t=new c["default"],i=Object.keys(r),a=void 0;this.VARS=u.CONST;var n=!0,s=!1,l=void 0;try{for(var h,p=function(){var i=h.value;a=i.toLowerCase(),e[a]=function(a,n){return t.module(i,a,n),e}},v=i[Symbol.iterator]();!(n=(h=v.next()).done);n=!0)p()}catch(d){s=!0,l=d}finally{try{!n&&v["return"]&&v["return"]()}finally{if(s)throw l}}this.play=function(e){return t.play(e)},this.stop=function(e){return t.stop(e)}};t["default"]=h,e.exports=t["default"]},/*!**************************!*\
  !*** ./src/lib/Synth.js ***!
  \**************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=i(1),r=i(10),u=a(r),l=function(){function e(){n(this,e),this.modulesConfig={},this.voices={},this.module("Master",s.CONST.MASTER,{level:100}),this.module("Envelope",s.CONST.ADSR,{link:s.CONST.MASTER,target:"gain",level:100,attack:null,decay:.1,sustain:100,release:5})}return o(e,[{key:"module",value:function(e,t,i){if(!e||e.constructor!==String)throw new Error("Synth Module :: missing type");if(!t||t.constructor!==String)throw new Error("Synth Module :: missing label");if(!i||i.constructor!==Object)throw new Error("Synth Module :: missing properties");this.modulesConfig[t]||this.addModule(e,t,i)}},{key:"addModule",value:function(e,t,i){this.modulesConfig[t]={type:e,props:i}}},{key:"play",value:function(e){this.voices[e]||(this.voices[e]=new u["default"](e,this.modulesConfig),this.voices[e].noteOn())}},{key:"stop",value:function(e){this.voices[e]&&(this.voices[e].noteOff(),this.voices[e]=void 0)}}]),e}();t["default"]=l,e.exports=t["default"]},/*!********************************!*\
  !*** ./src/lib/core/Effect.js ***!
  \********************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(1),l=i(3),c=a(l),h=i(9),f=a(h),p=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.main=null,this.mainEffect=null}return o(t,e),s(t,[{key:"setMainEffect",value:function(e,t,i){this.main=new f["default"][e](i),this.mainEffect=this.main[t]}},{key:"createGain",value:function(){return!1}},{key:"getLineIn",value:function(e,t){return e===u.TYPES.MODULATOR?this.mainEffect[t.target]:this.main.input}},{key:"getLineOut",value:function(){return this.main.output}},{key:"getEnvelopeTarget",value:function(e){var t=null;return"gain"===e?t=this.main.output.gain:this.main&&this.mainEffect&&this.mainEffect[e]&&(t=this.main.filter[e]),t}}]),t}(c["default"]);t["default"]=p,e.exports=t["default"]},/*!***************************************!*\
  !*** ./src/lib/core/EffectManager.js ***!
  \***************************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),o=a(n),s=i(17),r=a(s),u=new r["default"](o["default"]);t["default"]=u,e.exports=t["default"]},/*!*******************************!*\
  !*** ./src/lib/core/Voice.js ***!
  \*******************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=i(5),u=n(r),l=i(4),c=a(l),h=i(1),f=function(){function e(t,i){o(this,e),this.note=t,this.modulesConfig=i,this.modules={},this.soundSources=[],this.master=null,this.setupModules(),this.linkModules()}return s(e,[{key:"setupModules",value:function(){var e=this,t=void 0,i=void 0;Object.keys(this.modulesConfig).forEach(function(a){t=e.modulesConfig[a],t.type&&t.props&&(i=new u[t.type](t.props),e.modules[a]={type:t.type,instance:i},i.instance instanceof c["default"]?e.soundSources.push(i):t.type===h.TYPES.MASTER&&(e.master=i))})}},{key:"linkModules",value:function(){var e=this;Object.keys(this.modules).forEach(function(t){var i=e.modules[t].instance,a=e.modules[t].type,n=void 0,o=void 0,s=void 0;i.link&&(n=e.modules[i.link],n&&n.instance&&(o=i.getLineOut(),s=n.instance.getLineIn(a,i),o&&s&&o.connect(s)))}),this.master.lineOut()}},{key:"noteOn",value:function(){var e=this,t=void 0,i=void 0;Object.keys(this.modules).forEach(function(a){t=e.modules[a].instance,"function"==typeof t.setEnvelope&&(i=e.modules[t.link]?e.modules[t.link].instance:null,t.setEnvelope(i)),"function"==typeof t.setNote&&t.setNote(+e.note)}),Object.keys(this.modules).forEach(function(i){t=e.modules[i].instance,"function"==typeof t.noteOn&&t.noteOn()})}},{key:"noteOff",value:function(){var e=this,t=0,i=this.modules.adsr.instance,a=void 0,n=void 0;t=i.getReleaseTime(),Object.keys(this.modules).forEach(function(t){a=e.modules[t].instance,"function"==typeof a.resetEnvelope&&(n=e.modules[a.link]?e.modules[a.link].instance:null,a.resetEnvelope(n))}),Object.keys(this.modules).forEach(function(i){a=e.modules[i].instance,"function"==typeof a.noteOff&&a.noteOff(t)})}}]),e}();t["default"]=f,e.exports=t["default"]},/*!*************************************!*\
  !*** ./src/lib/modules/Envelope.js ***!
  \*************************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(2),l=a(u),c=i(3),h=a(c),f=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.target=e.target||null,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release}return o(t,e),s(t,[{key:"createGain",value:function(){return!1}},{key:"getReleaseTime",value:function(){var e=l["default"].currentTime,t=void 0;return t=this.release?e+this.release/10:e+.2}},{key:"setEnvelope",value:function(e){var t=l["default"].currentTime,i=this.level%101,a=void 0,n=void 0,o=this.attack/20,s=void 0;"gain"===this.target?(a=i/100,n=this.sustain/100):(a=72*i,n=a*this.sustain/100),o||(o=.05),e&&"function"==typeof e.getEnvelopeTarget&&(s=e.getEnvelopeTarget(this.target),s&&(s.setValueAtTime(0,t),s.linearRampToValueAtTime(a,t+o),s.setTargetAtTime(n,t+o,this.decay/100)))}},{key:"resetEnvelope",value:function(e){var t=l["default"].currentTime,i=void 0;e&&"function"==typeof e.getEnvelopeTarget&&(i=e.getEnvelopeTarget(this.target),i&&(i.cancelScheduledValues(t),"gain"===this.target&&i.setValueAtTime(i.value,t),i.setTargetAtTime(0,t,this.release/100)))}},{key:"getLineOut",value:function(){return!1}}]),t}(h["default"]);t["default"]=f,e.exports=t["default"]},/*!***********************************!*\
  !*** ./src/lib/modules/Filter.js ***!
  \***********************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},r=i(1),u=i(8),l=a(u),c=function(e){function t(e){n(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.freq=+e.freq||11e3,this.q=+e.q||10,this.bypass=+e.bypass||0,this.filterGain=this.level||0,this.setMainEffect("Filter","filter",{frequency:this.freq,Q:this.q,gain:this.filterGain,filterType:e.type||r.CONST.FILTER_LOWPASS,bypass:this.bypass})}return o(t,e),t}(l["default"]);t["default"]=c,e.exports=t["default"]},/*!***********************************!*\
  !*** ./src/lib/modules/Master.js ***!
  \***********************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(2),l=a(u),c=i(3),h=a(c),f=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.main=l["default"].createGain(),this.link=null}return o(t,e),s(t,[{key:"getLineIn",value:function(){return this.main}},{key:"lineOut",value:function(){this.main.connect(this.gain),this.gain.connect(l["default"].destination)}}]),t}(h["default"]);t["default"]=f,e.exports=t["default"]},/*!**************************************!*\
  !*** ./src/lib/modules/Modulator.js ***!
  \**************************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(1),l=i(2),c=a(l),h=i(4),f=a(h),p=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.freq=+e.freq||440,this.target=e.target||"frequency",this.main=c["default"].createOscillator(),this.main.type=e.type||u.CONST.WAVE_SINE,this.main.connect(this.gain)}return o(t,e),s(t,[{key:"setNote",value:function(){var e=this.freq%11;this.main.frequency.value=e}},{key:"getLineIn",value:function(e,t){return e===u.TYPES.MODULATOR?this.main[t.target]:this.main.frequency}}]),t}(f["default"]);t["default"]=p,e.exports=t["default"]},/*!**********************************!*\
  !*** ./src/lib/modules/Noise.js ***!
  \**********************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(1),l=i(2),c=a(l),h=i(4),f=a(h),p=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.main=c["default"].createBufferSource(),this.main.connect(this.gain),this.color=e.color||"white",this.setColor()}return o(t,e),s(t,[{key:"setColor",value:function(){switch(this.color){case u.CONST.NOISE_WHITE:this.main.buffer=this.white();break;case u.CONST.NOISE_PINK:this.main.buffer=this.pink();break;case u.CONST.NOISE_BROWN:this.main.buffer=this.brown();break;default:throw new Error("Invalid Noise color: "+this.color)}}},{key:"white",value:function(){for(var e=this.getNoiseBuffer(),t=this.getBufferSize(),i=e.getChannelData(0),a=0;t>a;a++)i[a]=2*Math.random()-1;return e}},{key:"pink",value:function(){var e=void 0,t=void 0,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,r=this.getNoiseBuffer(),u=this.getBufferSize(),l=r.getChannelData(0),c=void 0;e=t=i=a=n=o=s=0;for(var h=0;u>h;h++)c=2*Math.random()-1,e=.99886*e+.0555179*c,t=.99332*t+.0750759*c,i=.969*i+.153852*c,a=.8665*a+.3104856*c,n=.55*n+.5329522*c,o=-.7616*o-.016898*c,l[h]=e+t+i+a+n+o+s+.5362*c,l[h]*=.11,s=.115926*c;return r}},{key:"brown",value:function(){for(var e=this.getNoiseBuffer(),t=this.getBufferSize(),i=e.getChannelData(0),a=0,n=void 0,o=0;t>o;o++)n=n=2*Math.random()-1,i[o]=(a+.02*n)/1.02,a=i[o],i[o]*=3.5;return e}},{key:"getBufferSize",value:function(){return 2*c["default"].sampleRate}},{key:"getNoiseBuffer",value:function(){var e=this.getBufferSize(),t=c["default"].createBuffer(1,e,c["default"].sampleRate);return t}},{key:"setNote",value:function(){this.main.loop=!0}},{key:"getLineIn",value:function(e,t){return e===u.TYPES.MODULATOR&&this.main[t.target]?this.main[t.target]:this.main.detune}}]),t}(f["default"]);t["default"]=p,e.exports=t["default"]},/*!***************************************!*\
  !*** ./src/lib/modules/Oscillator.js ***!
  \***************************************/
function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var u=r.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=o,i=s,a=!0,r=l=void 0}},u=i(1),l=i(2),c=a(l),h=i(4),f=a(h),p=function(e){function t(e){n(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.detune=+e.detune||0,this.main=c["default"].createOscillator(),this.main.type=e.type||u.CONST.WAVE_SINE,this.main.connect(this.gain),this.setDetune()}return o(t,e),s(t,[{key:"setDetune",value:function(){this.detune>1200?this.detune=1200:this.detune<-1200&&(this.detune=-1200),this.main.detune.value=this.detune}},{key:"setNote",value:function(e){this.main.frequency.value=e}},{key:"getLineIn",value:function(e,t){return e===u.TYPES.MODULATOR?this.main[t.target]:this.main.frequency}}]),t}(f["default"]);t["default"]=p,e.exports=t["default"]},/*!**************************!*\
  !*** ./~/tunajs/tuna.js ***!
  \**************************/
function(e,t,i){!function(t){function i(){return a}function a(e){if(!(this instanceof a))return new a(e);if(t.AudioContext||(t.AudioContext=t.webkitAudioContext),e||(console.log("tuna.js: Missing audio context! Creating a new context for you."),e=t.AudioContext&&new t.AudioContext),!e)throw new Error("Tuna cannot initialize because this environment does not support web audio.");n(e),c=e,h=this}function n(e){function t(){var e=Array.prototype.shift.apply(arguments);return e=p.isPrototypeOf?p.isPrototypeOf(e)?e.input:e:e.input||e,arguments=Array.prototype.slice.call(arguments),arguments.unshift(e),n.apply(this,arguments),e}if(e.__connectified__!==!0){var i=e.createGain(),a=Object.getPrototypeOf(Object.getPrototypeOf(i)),n=a.connect;a.connect=t,e.__connectified__=!0}}function o(e){return Math.max(0,Math.round(100*Math.pow(2,e/6))/100)}function s(e,t){var i,a,n=0,o=0,s=0,r=0;return i=e.toExponential().match(/^.\.?(.*)e(.+)$/),n=parseInt(i[2],10)-(i[1]+"").length,i=t.toExponential().match(/^.\.?(.*)e(.+)$/),o=parseInt(i[2],10)-(i[1]+"").length,o>n&&(n=o),a=e%t,-100>n||n>20?(s=Math.round(Math.log(a)/Math.log(10)),r=Math.pow(10,s),(a/r).toFixed(s-n)*r):parseFloat(a.toFixed(-n))}function r(e){return 0===e?1:Math.abs(e)/e}function u(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function l(e,t){return void 0===e?t:e}var c,h,f=function(e,t){e.value=t},p=Object.create(null,{activate:{writable:!0,value:function(e){e?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(e)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(e){this._lastBypassValue!==e&&(this._bypass=e,this.activate(!e),this._lastBypassValue=e)}},connect:{value:function(e){this.output.connect(e)}},disconnect:{value:function(e){this.output.disconnect(e)}},connectInOrder:{value:function(e){for(var t=e.length-1;t--;){if(!e[t].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",e[t]);e[t+1].input?e[t].connect(e[t+1].input):e[t].connect(e[t+1])}}},getDefaults:{value:function(){var e={};for(var t in this.defaults)e[t]=this.defaults[t].value;return e}},automate:{value:function(e,t,i,a){var n,o=a?~~(a/1e3):c.currentTime,s=i?~~(i/1e3):0,r=this.defaults[e],u=this[e];u?r.automatable?(i?(n="linearRampToValueAtTime",u.cancelScheduledValues(o),u.setValueAtTime(u.value,o)):n="setValueAtTime",u[n](t,s+o)):u=t:console.error("Invalid Property for "+this.name)}}}),v="float",d="boolean",y="string",m="int";"undefined"!=typeof e&&e.exports?e.exports=a:t.define("Tuna",i),a.prototype.Bitcrusher=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=c.createGain(),this.activateNode=c.createGain(),this.processor=c.createScriptProcessor(this.bufferSize,1,1),this.output=c.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,i,a,n,o,s=0,r=0;this.processor.onaudioprocess=function(e){for(t=e.inputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(0),a=Math.pow(.5,this.bits),o=t.length,n=0;o>n;n++)s+=this.normfreq,s>=1&&(s-=1,r=a*Math.floor(t[n]/a+.5)),i[n]=r},this.bits=e.bits||this.defaults.bits.value,this.normfreq=l(e.normfreq,this.defaults.normfreq.value),this.bypass=e.bypass||!1},a.prototype.Bitcrusher.prototype=Object.create(p,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:m},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:m},bypass:{value:!0,automatable:!1,type:d},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:v}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(e){this.processor.bits=e}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(e){this.processor.normfreq=e}}}),a.prototype.Cabinet=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.convolver=this.newConvolver(e.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupGain=l(e.makeupGain,this.defaults.makeupGain),this.bypass=e.bypass||!1},a.prototype.Cabinet.prototype=Object.create(p,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:v},bypass:{value:!1,automatable:!1,type:d}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=e}},newConvolver:{value:function(e){return new h.Convolver({impulse:e,dryLevel:0,wetLevel:1})}}}),a.prototype.Chorus=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.attenuator=this.activateNode=c.createGain(),this.splitter=c.createChannelSplitter(2),this.delayL=c.createDelay(),this.delayR=c.createDelay(),this.feedbackGainNodeLR=c.createGain(),this.feedbackGainNodeRL=c.createGain(),this.merger=c.createChannelMerger(2),this.output=c.createGain(),this.lfoL=new h.LFO({target:this.delayL.delayTime,callback:f}),this.lfoR=new h.LFO({target:this.delayR.delayTime,callback:f}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=l(e.feedback,this.defaults.feedback.value),this.rate=l(e.rate,this.defaults.rate.value),this.delay=l(e.delay,this.defaults.delay.value),this.depth=l(e.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},a.prototype.Chorus.prototype=Object.create(p,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:v},delay:{value:.0045,min:0,max:1,automatable:!1,type:v},depth:{value:.7,min:0,max:1,automatable:!1,type:v},rate:{value:1.5,min:0,max:8,automatable:!1,type:v},bypass:{value:!0,automatable:!1,type:d}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(e){this._delay=2e-4*(2*Math.pow(10,e)),this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeLR.gain.value=this._feedback,this.feedbackGainNodeRL.gain.value=this._feedback}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),a.prototype.Compressor=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.compNode=this.activateNode=c.createDynamicsCompressor(),this.makeupNode=c.createGain(),this.output=c.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=l(e.automakeup,this.defaults.automakeup.value),this.makeupGain=e.makeupGain||this.defaults.makeupGain.value,this.threshold=l(e.threshold,this.defaults.threshold.value),this.release=e.release||this.defaults.release.value,this.attack=l(e.attack,this.defaults.attack.value),this.ratio=e.ratio||this.defaults.ratio.value,this.knee=l(e.knee,this.defaults.knee.value),this.bypass=e.bypass||!1},a.prototype.Compressor.prototype=Object.create(p,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:v},release:{value:250,min:10,max:2e3,automatable:!0,type:v},makeupGain:{value:1,min:1,max:100,automatable:!0,type:v},attack:{value:1,min:0,max:1e3,automatable:!0,type:v},ratio:{value:4,min:1,max:50,automatable:!0,type:v},knee:{value:5,min:0,max:40,automatable:!0,type:v},automakeup:{value:!1,automatable:!1,type:d},bypass:{value:!0,automatable:!1,type:d}}},computeMakeup:{value:function(){var e=4,t=this.compNode;return-(t.threshold.value-t.threshold.value/t.ratio.value)/e}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(e){this._automakeup=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(e){this.compNode.threshold.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(e){this.compNode.ratio.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(e){this.compNode.knee.value=e,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(e){this.compNode.attack.value=e/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(e){this.compNode.release=e/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(e){this.makeupNode.gain.value=o(e)}}}),a.prototype.Convolver=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.convolver=c.createConvolver(),this.dry=c.createGain(),this.filterLow=c.createBiquadFilter(),this.filterHigh=c.createBiquadFilter(),this.wet=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dryLevel=l(e.dryLevel,this.defaults.dryLevel.value),this.wetLevel=l(e.wetLevel,this.defaults.wetLevel.value),this.highCut=e.highCut||this.defaults.highCut.value,this.buffer=e.impulse||"../impulses/ir_rev_short.wav",this.lowCut=e.lowCut||this.defaults.lowCut.value,this.level=l(e.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.bypass=e.bypass||!1},a.prototype.Convolver.prototype=Object.create(p,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:v},lowCut:{value:20,min:20,max:22050,automatable:!0,type:v},dryLevel:{value:1,min:0,max:1,automatable:!0,type:v},wetLevel:{value:1,min:0,max:1,automatable:!0,type:v},level:{value:1,min:0,max:1,automatable:!0,type:v}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(e){this.filterLow.frequency.value=e}},highCut:{get:function(){return this.filterHigh.frequency},set:function(e){this.filterHigh.frequency.value=e}},level:{get:function(){return this.output.gain},set:function(e){this.output.gain.value=e}},dryLevel:{get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},wetLevel:{get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(e){var t=this.convolver,i=new XMLHttpRequest;return e?(i.open("GET",e,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(i.status<300&&i.status>199||302===i.status)&&c.decodeAudioData(i.response,function(e){t.buffer=e},function(e){e&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+e)})},void i.send(null)):void console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),a.prototype.Delay=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.dry=c.createGain(),this.wet=c.createGain(),this.filter=c.createBiquadFilter(),this.delay=c.createDelay(),this.feedbackNode=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=e.delayTime||this.defaults.delayTime.value,this.feedback=l(e.feedback,this.defaults.feedback.value),this.wetLevel=l(e.wetLevel,this.defaults.wetLevel.value),this.dryLevel=l(e.dryLevel,this.defaults.dryLevel.value),this.cutoff=e.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=e.bypass||!1},a.prototype.Delay.prototype=Object.create(p,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:v},feedback:{value:.45,min:0,max:.9,automatable:!0,type:v},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:v},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:v},dryLevel:{value:1,min:0,max:1,automatable:!0,type:v}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(e){this.delay.delayTime.value=e/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(e){this.wet.gain.value=e}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(e){this.dry.gain.value=e}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(e){this.feedbackNode.gain.value=e}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),a.prototype.Filter=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.filter=c.createBiquadFilter(),this.output=c.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.frequency=e.frequency||this.defaults.frequency.value,this.Q=e.resonance||this.defaults.Q.value,this.filterType=l(e.filterType,this.defaults.filterType.value),this.gain=l(e.gain,this.defaults.gain.value),this.bypass=e.bypass||!1},a.prototype.Filter.prototype=Object.create(p,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:v},Q:{value:1,min:.001,max:100,automatable:!0,type:v},gain:{value:0,min:-40,max:40,automatable:!0,type:v},bypass:{value:!0,automatable:!1,type:d},filterType:{value:"lowpass",automatable:!1,type:y}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(e){this.filter.type=e}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(e){this.filter.Q.value=e}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(e){this.filter.gain.value=e}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(e){this.filter.frequency.value=e}}}),a.prototype.MoogFilter=function(e){e||(e=this.getDefaults()),this.bufferSize=e.bufferSize||this.defaults.bufferSize.value,this.input=c.createGain(),this.activateNode=c.createGain(),this.processor=c.createScriptProcessor(this.bufferSize,1,1),this.output=c.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var t,i,a,n,o,s,r,u;t=i=a=n=o=s=r=u=0;var h,f,p,v,d,y;this.processor.onaudioprocess=function(e){for(h=e.inputBuffer.getChannelData(0),f=e.outputBuffer.getChannelData(0),p=1.16*this.cutoff,inputFactor=.35013*(p*p)*(p*p),v=this.resonance*(1-.15*p*p),y=h.length,d=0;y>d;d++)h[d]-=u*v,h[d]*=inputFactor,o=h[d]+.3*t+(1-p)*o,t=h[d],s=o+.3*i+(1-p)*s,i=o,r=s+.3*a+(1-p)*r,a=s,u=r+.3*n+(1-p)*u,n=r,f[d]=u},this.cutoff=l(e.cutoff,this.defaults.cutoff.value),this.resonance=l(e.resonance,this.defaults.resonance.value),this.bypass=e.bypass||!1},a.prototype.MoogFilter.prototype=Object.create(p,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:d},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:v},resonance:{value:3.5,min:0,max:4,automatable:!1,type:v}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(e){this.processor.cutoff=e}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(e){this.processor.resonance=e}}}),a.prototype.Overdrive=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.inputDrive=c.createGain(),this.waveshaper=c.createWaveShaper(),this.outputDrive=c.createGain(),this.output=c.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=l(e.drive,this.defaults.drive.value),this.outputGain=l(e.outputGain,this.defaults.outputGain.value),this.curveAmount=l(e.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=l(e.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=e.bypass||!1},a.prototype.Overdrive.prototype=Object.create(p,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:1,min:0,max:1,automatable:!0,type:v,scaled:!0},outputGain:{value:1,min:0,max:1,automatable:!0,type:v,scaled:!0},curveAmount:{value:.725,min:0,max:1,automatable:!1,type:v},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:m}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(e){this._drive=e}},curveAmount:{get:function(){return this._curveAmount},set:function(e){this._curveAmount=e,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(e){this._outputGain=o(e)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(e){this._algorithmIndex=e,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(e,t,i){e=Math.min(e,.9999);var a,n,o=2*e/(1-e);for(a=0;t>a;a++)n=2*a/t-1,i[a]=(1+o)*n/(1+o*Math.abs(n))},function(e,t,i){var a,n,o;for(a=0;t>a;a++)n=2*a/t-1,o=(.5*Math.pow(n+1.4,2)-1)*o>=0?5.8:1.2,i[a]=u(o)},function(e,t,i){var a,n,o,s=1-e;for(a=0;t>a;a++)n=2*a/t-1,o=0>n?-Math.pow(Math.abs(n),s+.04):Math.pow(n,s),i[a]=u(2*o)},function(e,t,i){var a,n,o,s,u=1-e>.99?.99:1-e;for(a=0;t>a;a++)n=2*a/t-1,s=Math.abs(n),u>s?o=s:s>u?o=u+(s-u)/(1+Math.pow((s-u)/(1-u),2)):s>1&&(o=s),i[a]=r(n)*o*(1/((u+1)/2))},function(e,t,i){var a,n;for(a=0;t>a;a++)n=2*a/t-1,-.08905>n?i[a]=-3/4*(1-Math.pow(1-(Math.abs(n)-.032857),12)+1/3*(Math.abs(n)-.032847))+.01:n>=-.08905&&.320018>n?i[a]=-6.153*(n*n)+3.9375*n:i[a]=.630035},function(e,t,i){var a,n,o=2+Math.round(14*e),s=Math.round(Math.pow(2,o-1));for(a=0;t>a;a++)n=2*a/t-1,i[a]=Math.round(n*s)/s}]}}),a.prototype.Phaser=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.splitter=this.activateNode=c.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=c.createGain(),this.feedbackGainNodeR=c.createGain(),this.merger=c.createChannelMerger(2),this.filteredSignal=c.createGain(),this.output=c.createGain(),this.lfoL=new h.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new h.LFO({target:this.filtersR,callback:this.callback});for(var t=this.stage;t--;)this.filtersL[t]=c.createBiquadFilter(),this.filtersR[t]=c.createBiquadFilter(),this.filtersL[t].type="allpass",this.filtersR[t].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=l(e.rate,this.defaults.rate.value),this.baseModulationFrequency=e.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=l(e.depth,this.defaults.depth.value),this.feedback=l(e.feedback,this.defaults.feedback.value),this.stereoPhase=l(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},a.prototype.Phaser.prototype=Object.create(p,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:v},depth:{value:.6,min:0,max:1,automatable:!1,type:v},feedback:{value:.7,min:0,max:1,automatable:!1,type:v},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:v},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:v}}},callback:{value:function(e,t){for(var i=0;4>i;i++)e[i].frequency.value=t}},depth:{get:function(){return this._depth},set:function(e){this._depth=e,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(e){this._baseModulationFrequency=e,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this._depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(e){this._feedback=e,this.feedbackGainNodeL.gain.value=this._feedback,this.feedbackGainNodeR.gain.value=this._feedback}},stereoPhase:{get:function(){return this._stereoPhase},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=s(t,2*Math.PI),this.lfoR._phase=t}}}),a.prototype.PingPongDelay=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.wetLevel=c.createGain(),this.stereoToMonoMix=c.createGain(),this.feedbackLevel=c.createGain(),this.output=c.createGain(),this.delayLeft=c.createDelay(),this.delayRight=c.createDelay(),this.activateNode=c.createGain(),this.splitter=c.createChannelSplitter(2),this.merger=c.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wetLevel),this.wetLevel.connect(this.delayLeft),this.feedbackLevel.connect(this.delayLeft),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==e.delayTimeLeft?e.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==e.delayTimeRight?e.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==e.feedback?e.feedback:this.defaults.feedback.value,this.wetLevel.gain.value=void 0!==e.wetLevel?e.wetLevel:this.defaults.wetLevel.value,this.bypass=e.bypass||!1},a.prototype.PingPongDelay.prototype=Object.create(p,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(e){this._delayTimeLeft=e,this.delayLeft.delayTime.value=e/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(e){this._delayTimeRight=e,this.delayRight.delayTime.value=e/1e3}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:m},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:m},feedback:{value:.3,min:0,max:1,automatable:!1,type:v},wetLevel:{value:.5,min:0,max:1,automatable:!1,type:v}}}}),a.prototype.Tremolo=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.splitter=this.activateNode=c.createChannelSplitter(2),this.amplitudeL=c.createGain(),this.amplitudeR=c.createGain(),this.merger=c.createChannelMerger(2),this.output=c.createGain(),this.lfoL=new h.LFO({target:this.amplitudeL.gain,callback:f}),this.lfoR=new h.LFO({target:this.amplitudeR.gain,callback:f}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=e.rate||this.defaults.rate.value,this.intensity=l(e.intensity,this.defaults.intensity.value),this.stereoPhase=l(e.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=e.bypass||!1},a.prototype.Tremolo.prototype=Object.create(p,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:v},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:v},rate:{value:5,min:.1,max:11,automatable:!1,type:v}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(e){this._intensity=e,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(e){this._rate=e,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._rate},set:function(e){this._stereoPhase=e;var t=this.lfoL._phase+this._stereoPhase*Math.PI/180;t=s(t,2*Math.PI),this.lfoR.phase=t}}}),a.prototype.WahWah=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.activateNode=c.createGain(),this.envelopeFollower=new h.EnvelopeFollower({target:this,callback:function(e,t){e.sweep=t}}),this.filterBp=c.createBiquadFilter(),this.filterPeaking=c.createBiquadFilter(),this.output=c.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=l(e.enableAutoMode,this.defaults.automode.value),this.resonance=e.resonance||this.defaults.resonance.value,this.sensitivity=l(e.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=l(e.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=e.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=l(e.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=e.bypass||!1},a.prototype.WahWah.prototype=Object.create(p,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:d},baseFrequency:{value:.5,min:0,max:1,automatable:!1,type:v},excursionOctaves:{value:2,min:1,max:6,automatable:!1,type:v},sweep:{value:.2,min:0,max:1,automatable:!1,type:v},resonance:{value:10,min:1,max:100,automatable:!1,type:v},sensitivity:{value:.5,min:-1,max:1,automatable:!1,type:v}}},activateCallback:{value:function(e){this.automode=e}},automode:{get:function(){return this._automode},set:function(e){this._automode=e,e?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep,this.filterPeaking.frequency.value=this._baseFrequency+this._excursionFrequency*this._sweep}catch(e){clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep.value},set:function(e){this._sweep=Math.pow(e>1?1:0>e?0:e,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=50*Math.pow(10,2*e),this._excursionFrequency=Math.min(c.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(e){this._excursionOctaves=e,this._excursionFrequency=Math.min(c.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(e){this._sensitivity=Math.pow(10,e)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(e){this._resonance=e,this.filterPeaking.Q=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),a.prototype.EnvelopeFollower=function(e){e||(e=this.getDefaults()),this.input=c.createGain(),this.jsNode=this.output=c.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=l(e.attackTime,this.defaults.attackTime.value),this.releaseTime=l(e.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=e.target||{},this.callback=e.callback||function(){}},a.prototype.EnvelopeFollower.prototype=Object.create(p,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:v},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:v}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(e){this._attackTime=e,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(e){this._releaseTime=e,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(e){"function"==typeof e?this._callback=e:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){this.activated=e,e?(this.jsNode.connect(c.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null)}},returnCompute:{value:function(e){return function(t){e.compute(t)}}},compute:{value:function(e){var t,i,a,n,o=e.inputBuffer.getChannelData(0).length,s=e.inputBuffer.numberOfChannels;if(i=a=n=0,s>1)for(n=0;o>n;++n)for(;s>i;++i)t=e.inputBuffer.getChannelData(i)[n],a+=t*t/s;else for(n=0;o>n;++n)t=e.inputBuffer.getChannelData(0)[n],a+=t*t;a=Math.sqrt(a),this._envelope<a?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*a):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*a),this._callback(this._target,this._envelope)}}}),a.prototype.LFO=function(e){this.output=c.createScriptProcessor(256,1,1),this.activateNode=c.destination,this.frequency=l(e.frequency,this.defaults.frequency.value),this.offset=l(e.offset,this.defaults.offset.value),this.oscillation=l(e.oscillation,this.defaults.oscillation.value),this.phase=l(e.phase,this.defaults.phase.value),this.target=e.target||{},this.output.onaudioprocess=this.callback(e.callback||function(){}),this.bypass=e.bypass||!1},a.prototype.LFO.prototype=Object.create(p,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:v},offset:{value:.85,min:0,max:22049,automatable:!1,type:v},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:v},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:v}}},frequency:{get:function(){return this._frequency},set:function(e){this._frequency=e,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate;
}},offset:{get:function(){return this._offset},set:function(e){this._offset=e}},oscillation:{get:function(){return this._oscillation},set:function(e){this._oscillation=e}},phase:{get:function(){return this._phase},set:function(e){this._phase=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},activate:{value:function(e){e?this.output.connect(c.destination):this.output.disconnect(c.destination)}},callback:{value:function(e){var t=this;return function(){t._phase+=t._phaseInc,t._phase>2*Math.PI&&(t._phase=0),e(t._target,t._offset+t._oscillation*Math.sin(t._phase))}}}}),a.toString=a.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}(this)}]);
//# sourceMappingURL=web-synth.min.js.map