<html>
    <head>
        <title>Web Synth</title>
        <style>
            .note {
                padding:10px;
                border: 1px solid #000;
                margin: 10px;
            }
        </style>
    </head>
    <body>

        <div class="note" data-note="261.626">C4</div>
        <div class="note" data-note="293.665">D4</div>
        <div class="note" data-note="329.628">E4</div>
        <div class="note" data-note="349.228">F4</div>
        <div class="note" data-note="391.995">G4</div>
        <div class="note" data-note="440.000">A4</div>
        <div class="note" data-note="493.883">B4</div>


        <script src="../dist/web-synth.js"></script>
        <script>
            window.onload = function () {
                var notes = document.getElementsByClassName('note');
                var synth = new WebSynth();
                var frequencies = {
                    65: '261.626',
                    83: '293.665',
                    68: '329.628'
                };

                for (var i = 0; i < notes.length; i++) {

                    (function(i){
                        var current = notes[i];
                        current.addEventListener('mousedown', function(){
                            var freq = current.getAttribute('data-note');
                            synth.play(freq);
                        }, false);

                        current.addEventListener('mouseup', function(){
                            var freq = current.getAttribute('data-note');
                            synth.stop(freq);
                        }, false);
                    })(i);

                }
                document.addEventListener('keydown', function(e){
                    var evt = e.which || e.keyCode,
                        freq = frequencies[evt];
                    if(freq){
                        synth.play(freq);
                    }
                }, false);

                document.addEventListener('keyup', function(e){
                    var evt = e.which || e.keyCode,
                            freq = frequencies[evt];
                    if(freq){
                        synth.stop(freq);
                    }
                }, false);


                synth.oscillator('OSC-A', {
                    type: 'sine',
                    level: 1,
                    link: 'master'
                });

//                synth.oscillator('OSC-B', {
//                    type: 'sine',
//                    level: 1,
//                    link: 'F1'
//                });

//                synth.filter('F1', {
//                    type: 'lowpass',
//                    frequency: '400',
//                    link: 'master'
//                });
            };

        </script>
    </body>
</html>
